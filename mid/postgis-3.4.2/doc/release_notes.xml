<?xml version="1.0" encoding="UTF-8"?>
<appendix id="release_notes">
  <title>Appendix</title>
    <subtitle>Release Notes</subtitle>
        <sect1>
            <title>PostGIS 3.4.2</title>
            <para>2024/02/08</para>
            <para>This version requires PostgreSQL 12-16, GEOS 3.6 or higher, and Proj 6.1+. To take advantage of all features, GEOS 3.12+ is needed. To take advantage of all SFCGAL featurs, SFCGAL 1.4.1+ is needed.</para>
            <para>NOTE: GEOS 3.12.1 details at <ulink url="https://libgeos.org/posts/2023-11-11-geos-3-12-1-released/">GEOS 3.12.1 release notes</ulink></para>
            <simplesect>
                <title>Bug Fixes</title>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5633">5633</ulink>, Fix load, upgrade and usage with standard_conforming_strings set to off (Sandro Santilli, Regina Obe)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5571">5571</ulink>, Memory over-allocation for narrow inputs (Paul Ramsey)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5610">5610</ulink>, Allow Nan and infinity again in ST_SetPoint (Regina Obe)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5627">5627</ulink>, Handling of EMPTY components in PiP check (Paul Ramsey)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5629">5629</ulink>, Handling EMPTY components in repeated point removal (Paul Ramsey)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5604">5604</ulink>, Handle distance between collections with empty elements (Paul Ramsey)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5635">5635</ulink>, Handle NaN points in ST_Split (Regina Obe)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5648">5648</ulink>, postgis_raster upgrade fails on PG16 (Ronan Dunklau)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5646">5646</ulink>, Crash on collections with empty members (Paul Ramsey)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5580">5580</ulink>, Handle empty collection components in 3d distance (Paul Ramsey)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5639">5639</ulink>, ST_DFullyWithin line/poly error case (Paul Ramsey)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5662">5662</ulink>, Change XML parsers to SAX2 (Paul Ramsey)</para>
            </simplesect>
        </sect1>
        <sect1>
            <title>PostGIS 3.4.1</title>
            <para>2023/11/19</para>
            <para>NOTE: GEOS 3.12.1 details at <ulink url="https://libgeos.org/posts/2023-11-11-geos-3-12-1-released/">GEOS 3.12.1 release notes</ulink></para>
             <simplesect>
                <title>Bug Fixes</title>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5541">5541</ulink>, Fix --without-gui configure switch (Chris Mayo)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5558">5558</ulink>, Fix uninitialized variable in ST_AsMVTGeom (Sandro Santilli)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5590">5590</ulink>, Fix script-based load of topology.sql (Sandro Santilli)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5574">5574</ulink>, #5575, #5576, #5577, #5578, #5579, #5569
                        Fix restore of postgis dumps since 2.1 (Sandro Santilli)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5568">5568</ulink>, Improve robustness of topology face split handling (Sandro Santilli)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5548">5548</ulink>, Fix box-filtered validity check of topologies with edge-less faces
                        (Sandro Santilli)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5485">5485</ulink>, Fix postgis script on OpenBSD (Sandro Santilli)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5516">5516</ulink>, Fix upgrade with views using deprecated function, among which:
                        ST_AddBand (#5509), ST_AsGeoJSON (#5523) ST_AsKML (#5524)
                        ST_Aspect (#5491), ST_BandIsNoData (#5510), ST_BandMetadata (#5502),
                        ST_BandNoDataValue (#5503), ST_BandPath (#5511),
                        ST_BandPixelType (#5512), ST_Clip (#5488), ST_Count (#5517),
                        ST_GeoReference (#5514), ST_Intersects(raster, ...) (#5489),
                        ST_LineCrossingDirection (#5518)
                        ST_MakeEmptyRaster (#5508), ST_MapAlgebraFCT (#5500),
                        ST_Polygon(raster, ...) (#5507), ST_SetBandIsNoData (#5505),
                        ST_SetBandNoDataValue (#5506), ST_SetGeoreference (#5504),
                        ST_SetValue (#5519),
                        ST_Slope (#5490), ST_SummaryStats (#5515), ST_TileEnvelope (#5499)
                        ST_Value (#5513, #5484), toTopoGeom (#5526).
                        (Sandro Santilli)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5494">5494</ulink>, Fix double-upgrade with view using st_dwithin(text, ...)
                        (Sandro Santilli)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5479">5479</ulink>, postgis_full_version() and postgis_gdal_version() sometimes
                        warn of deprecated SRID: 2163 (Regina Obe)</para>
                <para>Include elevation in output of ST_Contour when in polygonal mode (Paul Ramsey)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5482">5482</ulink>, New Proj output is only available for proj 7.1+ (Regina Obe)</para>
                <para>Fix JsonB casting issue (Paul Ramsey)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5535">5535</ulink>, Cleanup String handling in debug_standardize_address
                        and standardize_address (Regina Obe)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5605">5605</ulink>, Fix regression failure with GEOS 3.13, main branch (Regina Obe)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5603">5603</ulink>, [postgis_tiger_geocoder] Change to load 2023 Census Tiger/Line (Regina Obe)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5525">5525</ulink>, [postgis_tiger_geocoder],[postgis_topology] Regression failure
                        when installed by non-superuser (Regina Obe, Sandro Santilli)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5581">5581</ulink>, ST_Project(geometry, float, float) is using
          longitudes as latitudes (Regina obe)</para>
             </simplesect>

            <simplesect>
                <title>Enhancements</title>
                  <para><ulink url="https://trac.osgeo.org/postgis/ticket/5492">5492</ulink>, Have postgis script report presence of deprecated functions
                  (Sandro Santilli)</para>
                  <para><ulink url="https://trac.osgeo.org/postgis/ticket/5493">5493</ulink>, Always try to drop deprecated function on upgrade
                  (Sandro Santilli)</para>
             </simplesect>
        </sect1>
        <sect1>
            <title>PostGIS 3.4.0</title>
            <para>2023/08/15</para>
            <para>This version requires PostgreSQL 12-16, GEOS 3.6 or higher, and Proj 6.1+.
            To take advantage of all features, GEOS 3.12+ is needed.
            To take advantage of all SFCGAL featurs, SFCGAL 1.4.1+ is needed.</para>
            <para>NOTE: GEOS 3.12.0 details at <ulink url="https://libgeos.org/posts/2023-06-27-geos-3-12-released/">GEOS 3.12.0 release notes</ulink></para>
            <para>Many thanks to our translation teams, in particular:</para>
            <para>Teramoto Ikuhiro (Japanese Team)</para>
            <para>Vincent Bre (French Team)</para>

            <para>There are 2 new ./configure switches:</para>
            <itemizedlist><listitem><para>--disable-extension-upgrades-install, will skip installing all the extension upgrade scripts except for the ANY--currentversion.  If you use this, you can install select upgrades using the postgis commandline tool</para></listitem>
                <listitem><para>--without-pgconfig, will build just the commandline tools raster2pgsql and shp2pgsql even if PostgreSQL is not installed</para></listitem>
            </itemizedlist>

            <simplesect>
                <title>New features</title>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5055">5055</ulink>, complete manual internationalization (Sandro Santilli)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5052">5052</ulink>, target version support in postgis_extensions_upgrade
                    (Sandro Santilli)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5306">5306</ulink>, expose version of GEOS at compile time (Sandro Santilli)</para>
                <para>New install-extension-upgrades command in postgis script (Sandro Santilli)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5257">5257</ulink>, <ulink url="https://trac.osgeo.org/postgis/ticket/5261">5261</ulink>, <ulink url="https://trac.osgeo.org/postgis/ticket/5277">5277</ulink>, Support changes for PostgreSQL 16 (Regina Obe)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5006">5006</ulink>, <ulink url="https://github.com/postgis/postgis/pull/705">705</ulink>, ST_Transform: Support PROJ pipelines (Robert Coup, Koordinates)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5283">5283</ulink>, [postgis_topology] RenameTopology (Sandro Santilli)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5286">5286</ulink>, [postgis_topology] RenameTopoGeometryColumn (Sandro Santilli)</para>
                <para><ulink url="https://github.com/postgis/postgis/pull/703">703</ulink>, [postgis_raster] Add min/max resampling as options (Christian Schroeder)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5336">5336</ulink>, [postgis_topology] topogeometry cast to topoelement support (Regina Obe)</para>
                <para>Allow singleton geometry to be inserted into Geometry(Multi*) columns (Paul Ramsey)</para>
                <para><ulink url="https://github.com/postgis/postgis/pull/721">721</ulink>, New window-based ST_ClusterWithinWin and ST_ClusterIntersectingWin (Paul Ramsey)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5397">5397</ulink>, [address_standardizer] debug_standardize_address function (Regina Obe)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5373">5373</ulink>ST_LargestEmptyCircle, exposes extra semantics on circle finding. Geos 3.9+ required(Martin Davis)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5267">5267</ulink>, ST_Project signature for geometry, and two-point signature (Paul Ramsey)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5267">5267</ulink>, ST_LineExtend for extending linestrings (Paul Ramsey)</para>
                <para>New coverage functions ST_CoverageInvalidEdges, ST_CoverageSimplify, ST_CoverageUnion (Paul Ramsey)</para>
            </simplesect>

            <simplesect>
                <title>Enhancements</title>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5194">5194</ulink>, do not update system catalogs from postgis_extensions_upgrade (Sandro Santilli)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5092">5092</ulink>, reduce number of upgrade paths installed on system (Sandro Santilli)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/635">635</ulink>, honour --bindir (and --prefix) configure switch for executables (Sandro Santilli)</para>
                <para>Honour --mandir (and --prefix) configure switch for man pages install path (Sandro Santilli)</para>
                <para>Honour --htmldir (and --docdir and --prefix) configure switch for
                    html pages install path (Sandro Santilli)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5447">5447</ulink> Manual pages added for postgis and postgis_restore utilities
    (Sandro Santilli)</para>
                <para>[postgis_topology] Speed up check of topology faces without edges (Sandro Santilli)</para>
                <para>[postgis_topology] Speed up coincident nodes check in topology validation  (Sandro Santilli)</para>
                <para><ulink url="https://github.com/postgis/postgis/pull/718">718</ulink>, ST_QuantizeCoordinates(): speed-up implementation (Even Rouault)</para>
                <para>Repair spatial planner stats to use computed selectivity for contains/within queries (Paul Ramsey)</para>
                <para><ulink url="https://github.com/postgis/postgis/pull/734">734</ulink>, Additional metadata on Proj installation in postgis_proj_version (Paul Ramsey)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5177">5177</ulink>, Allow building tools without PostgreSQL server headers.
           Respect prefix/bin for tools install (Sandro Santilli)</para>
                <para>ST_Project signature for geometry, and two-point signature (Paul Ramsey)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/4913">4913</ulink>, ST_AsSVG support for curve types CircularString, CompoundCurve, MultiCurve,
                        and MultiSurface (Regina Obe)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5266">5266</ulink>, ST_ClosestPoint, ST_ShortestLine, ST_LineSubString support for geography type (MobilityDB Esteban Zimanyi, Maxime Schoemans, Paul Ramsey)</para>
            </simplesect>

            <simplesect>
                <title>Breaking Changes</title>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5229">5229</ulink>, Drop support for Proj &lt; 6.1 and PG 11 (Regina Obe)</para>
                <para><ulink url="https://trac.osgeo.org/postgis/ticket/5306">5306</ulink>, <ulink url="https://github.com/postgis/postgis/pull/734">734</ulink>, postgis_full_version() and postgis_proj_version()
                    now output more information about proj network configuration
                    and data paths. GEOS compile-time version
                    also shown if different from run-time (Paul Ramsey, Sandro Santilli)</para>
                <para><ulink url="https://github.com/postgis/postgis/pull/5447">5447</ulink>, postgis_restore.pl renamed to postgis_restore
           (Sandro Santilli)</para>
                <para>Utilities now installed in OS bin or
   user specified --bindir and --prefix
   instead of postgresql bin
   and extension stripped except on windows
   (postgis, postgis_restore, shp2pgsql, raster2pgsql, pgsql2shp,
    pgtopo_import, pgtopo_export)</para>
            </simplesect>
    </sect1>

</appendix>
